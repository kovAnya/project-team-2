{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,uDCAAD,EAAAC,EAAA,S,kDAEMC,S,SAEgBC,EAAWC,EAAYC,G,OAAvBC,EAAUC,MAAAC,KAAAC,U,UAAVH,I,OAAAA,EAAfI,EAAAV,EAAA,CAAAU,EAAAC,GAAAC,MAAA,SAAAC,EAA0BT,EAAYC,G,IAEnCS,E,2FAAoBC,EAAMC,IAC9B,qDAAoFC,OAA/BC,EAAAC,OAAO,0BAA2CF,OAAnBb,EAAW,UAAaa,OAALZ,EAAK,yB,cADxGS,EAAWM,EAAAC,KAIJ,IAAThB,GACFiB,EAAAC,WAAWC,MAAMV,EAAYW,KAAKC,e,kBAG7BZ,EAAYW,KAAKE,S,gCAExBC,QAAQC,MAAKT,EAAAU,I,0DAZevB,MAAAC,KAAAC,U,yDDO1BsB,G,aAAiBC,SAASC,cAAc,kBACxCC,EAAkBF,SAASC,cAAc,uBACzCE,EAAgBH,SAASC,cAAc,WAEzCG,EAAa,GACbC,GAAc,EACdC,EAAS,K,SAEEC,I,OAAAA,EAAf7B,EAAAV,EAAA,CAAAU,EAAAC,GAAAC,MAAA,SAAAC,EAA0B2B,G,qEACxBA,EAAEC,iBAGiB,MADnBL,EAAaF,EAAgBQ,OACR,C,sBACnBhC,EAAAiC,GAASC,OAAOC,QAAQ,+C,iCAI1Bd,EAAeP,Q,kBAEErB,EAAWiC,EAAYlB,EAAAb,M,UAChB,KADtBiC,EAAMlB,EAAAC,MACKyB,OAAY,C,uBACrBC,EAAAC,QAAQC,SACRvC,EAAAiC,GAASC,OAAOC,QACd,6E,kCAIJR,GAAc,EACdF,EAAce,UAAY,G,WACpB,EAAAC,EAAAC,sBAAqBd,G,qHArBN/B,MAAAC,KAAAC,U,CAyBzBa,EAAAC,WAAW8B,GAAG,aAAa,SAAAC,GACzB,IAAMC,EAAcD,EAAMjD,KAC1B8B,EAAce,UAAY,GACtBb,GACF,EAAAc,EAAAC,uBAAqB,EAAAI,EAAAC,qBAAoBF,KAEzC,EAAAJ,EAAAC,sBAAqBjD,EAAWiC,EAAYmB,KAE9C,EAAAG,EAAAC,aACA,EAAAD,EAAAE,a,IAGF7B,EAAe8B,iBAAiB,U,SArCNrB,G,OAAXD,EAAUhC,MAAAC,KAAAC,U","sources":["src/js/search_movie.js","src/js/API/fetchSearchMovie.js"],"sourcesContent":["import { page } from './refs';\nimport { pagination } from './pagination';\nimport { fetchMoviesTrending } from './API/fetchMoviesTrending';\nimport { fetchFilms } from './API/fetchSearchMovie';\nimport { onScroll, onToTopBtn } from './scroll';\nimport { renderMoviesTrending } from './renderMoviesTrending';\nimport Notiflix from 'notiflix';\nimport { Loading } from 'notiflix/build/notiflix-loading-aio';\n\nimport { renderMoviesTrending } from './renderMoviesTrending';\n\nconst searchFilmForm = document.querySelector('.header__form');\nconst searchFilmInput = document.querySelector('.header__form-input');\nconst moviesElement = document.querySelector('.movies');\n\nlet inputValue = '';\nlet searchFilms = true;\nlet answer = null;\n\nasync function searchFilm(e) {\n  e.preventDefault();\n\n  inputValue = searchFilmInput.value;\n  if (inputValue === '') {\n    Notiflix.Notify.failure('Enter the correct movie name and try again.');\n    return;\n  }\n\n  searchFilmForm.reset();\n  try {\n    answer = await fetchFilms(inputValue, page);\n    if (answer.length === 0) {\n      Loading.remove();\n      Notiflix.Notify.failure(\n        'Search result not successful. Enter the correct movie name and try again.'\n      );\n      return;\n    }\n    searchFilms = false;\n    moviesElement.innerHTML = '';\n    await renderMoviesTrending(answer);\n  } catch (error) {}\n}\n\npagination.on('afterMove', event => {\n  const currentPage = event.page;\n  moviesElement.innerHTML = '';\n  if (searchFilms) {\n    renderMoviesTrending(fetchMoviesTrending(currentPage));\n  } else {\n    renderMoviesTrending(fetchFilms(inputValue, currentPage));\n  }\n  onScroll();\n  onToTopBtn();\n});\n\nsearchFilmForm.addEventListener('submit', searchFilm);\n","import { ApiKey } from '../refs';\nimport { pagination } from '../pagination';\nconst axios = require('axios').default;\n\nexport async function fetchFilms(inputValue, page) {\n  try {\n    const fetchResult = await axios.get(\n      `https://api.themoviedb.org/3/search/movie?api_key=${ApiKey}&language=en-US&query=${inputValue}&page=${page}&include_adult=false`\n    );\n    // searchFilms = false;\n    if (page === 1) {\n      pagination.reset(fetchResult.data.total_results);\n    }\n\n    return fetchResult.data.results;\n  } catch (error) {\n    console.error(error);\n  }\n}\n"],"names":["$bpxeT","parcelRequire","default","$eb7b91533d45b376$export$651946d2de0aa03","inputValue","page","$eb7b91533d45b376$var$_fetchFilms","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","fetchResult","$eb7b91533d45b376$require$axios","get","concat","$4Nugj","ApiKey","_ctx","sent","$jcFG7","pagination","reset","data","total_results","results","console","error","t0","$2bb8c70deac3ffd5$var$searchFilmForm","document","querySelector","$2bb8c70deac3ffd5$var$searchFilmInput","$2bb8c70deac3ffd5$var$moviesElement","$2bb8c70deac3ffd5$var$inputValue","$2bb8c70deac3ffd5$var$searchFilms","$2bb8c70deac3ffd5$var$answer","$2bb8c70deac3ffd5$var$_searchFilm","e","preventDefault","value","$iU1Pc","Notify","failure","length","$7rQOT","Loading","remove","innerHTML","$lnzPg","renderMoviesTrending","on","event","currentPage","$gsp2U","fetchMoviesTrending","$j1Fxp","onScroll","onToTopBtn","addEventListener"],"version":3,"file":"index.beddcd78.js.map"}