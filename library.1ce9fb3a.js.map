{"mappings":"oeAAAA,EAAA,S,WCAA,IAAAC,EAAAD,EAAA,SAGA,IAAIE,EAAW,GACXC,EAAW,GAMf,SAASC,EAAkBC,GACzBH,EAASI,KAAKD,GACdJ,EAAAM,eAAeC,KAXC,UAWeN,E,CAGjC,SAASO,EAAgBJ,GACvBF,EAASG,KAAKD,GACdJ,EAAAM,eAAeC,KAfC,QAeeL,E,CAE1B,SAASO,EAASC,EAAKC,GAC5BD,EAAIE,MAAMC,gBAAkB,UAC5BH,EAAIE,MAAME,MAAQ,UAClBJ,EAAIE,MAAMG,YAAc,UACxBJ,EAAMC,MAAMC,gBAAkB,UAC9BF,EAAMC,MAAME,MAAQ,QACpBH,EAAMC,MAAMG,YAAc,sBAE1BL,EAAIM,YAAc,UAClBL,EAAMM,aAAa,WAAY,QAC/BP,EAAIO,aAAa,WAAY,O,kBDlB/B,MAAMC,EAAWC,SAASC,cAAc,oBAClCC,EAAeF,SAASC,cAAc,WACtCE,EAAcH,SAASC,cAAc,eACrCG,EAAQJ,SAASC,cAAc,qBA+Id,SAAdI,IACP,MAAMC,EAAUN,SAASC,cAAc,gBACjCM,EAAWP,SAASC,cAAc,sBACxCK,EAAQE,SACRD,EAASC,SAETT,EAASU,UAAUlB,IAAI,aACvBS,SAASU,KAAKjB,MAAMkB,SAAW,SAC/BX,SAASY,oBAAoB,UAAWC,GACxCb,SAASY,oBAAoB,QAASE,E,CAIvB,SAARD,EAAcE,GACN,WAAXA,EAAEC,MACJX,G,CAKJ,SAASS,EAAgBC,GACnBA,EAAEE,SAAWlB,GACfM,G,CAlJJH,EAAagB,iBAAiB,SAG9B,SAAyBH,GACvB,GAA0B,QAAtBA,EAAEE,OAAOE,SACX,OAGFpB,EAASU,UAAUD,OAAO,aAC1BR,SAASU,KAAKjB,MAAMkB,SAAW,SAC/BX,SAASkB,iBAAiB,UAAWL,GACrCb,SAASkB,iBAAiB,QAASJ,GAEH,IAA5BM,EAAUL,EAAEE,OAAOI,QAAQC,GAC3BC,EAAgBC,OAAOJ,GAKvBK,EA/B4B,WAChC,IAAIC,EAAqBC,aAAaC,QAAQ,aAG9C,IACE,OAAmCC,KAAKC,MAAMJ,E,CAC9C,MAAOK,GACPC,QAAQC,KAAK,sD,EAsBQC,GACSC,QACNC,MAAKC,GAAQA,EAAKf,KAAOC,IAG/Ce,EAAcb,EAAWa,YACzBC,GAAQ,EAAAC,EAAAC,oBAAmBhB,EAAWc,MAAOd,EAAWiB,MACxDC,EAAelB,EAAWkB,aAC1BC,EAAanB,EAAWmB,WACxBC,EAAapB,EAAWoB,WACxBC,GAAY,EAAAN,EAAAO,iBAAgBtB,EAAWqB,WACvCE,EAAWvB,EAAWuB,SAE1B5C,EAAM6C,mBACJ,aAkCJ,SACEX,EACAC,EACAI,EACAC,EACAC,EACAC,EACAE,GAEA,MAAO,4FAEiDV,UAAoBC,sGAI5CA,8MAKiBI,kHAEVC,gLAKCC,sIAIzBN,0HAKkB,IAArBO,EAAUI,OACN,yBAAyBJ,QACzB,qKAQRE,EACI,gCAAgCA,QAChC,oT,CAjFVG,CACEb,EACAC,EACAI,EACAC,EACAC,EACAC,EACAE,IAGJ,MAAM/D,EAAM,C,YACVqD,E,MACAC,E,aACAI,E,WACAC,E,WACAC,E,UACAC,E,SACAE,GAEII,EAAWpD,SAASC,cAAc,eAClCoD,EAAWrD,SAASC,cAAc,eACxCmD,EAASlC,iBAAiB,SAAS,KACjCmC,EAASxD,YAAc,0BACvBP,EAAS8D,EAAUC,GACnBrE,EAAkBC,EAAI,IAExBoE,EAASnC,iBAAiB,SAAS,KACjCkC,EAASvD,YAAc,yBACvBP,EAAS+D,EAAUD,GACnB/D,EAAgBJ,EAAI,G,IA5DxBkB,EAAYe,iBAAiB,QAASb","sources":["src/js/modal_film.js","src/js/add_local_storage.js"],"sourcesContent":["import { fetchMoviesTrending } from './fetchMoviesTrending';\nimport { getMovieGenres } from './genres';\nimport { btnColor } from './add_local_storage';\nimport {\n  renderMoviesTrending,\n  processingReleasedYear,\n  processingGenre,\n  processingNameFilm,\n} from './renderMoviesTrending';\nimport { onWatchedBtnClick, onQueueBtnClick } from './add_local_storage';\n\nconst backdrop = document.querySelector('.modal__backdrop');\nconst filmsListRef = document.querySelector('.movies');\nconst closeBtnRef = document.querySelector('.closeModal');\nconst modal = document.querySelector('.modal__container');\n\nlet BASE_URL_IMAGE = 'https://image.tmdb.org/t/p';\nlet fileSize = 'w400';\n\n////////////////////////////////Получаем данные с Локального Хранилища\n\nfunction dataInLocalStorage() {\n  let dataInLocalStorage = localStorage.getItem('dataInApi');\n  let parsedDataInLocalStorage = '';\n\n  try {\n    return (parsedDataInLocalStorage = JSON.parse(dataInLocalStorage));\n  } catch (error) {\n    console.warn('Ошибка во время парса данных с локального хранилища');\n  }\n}\n//////////////////////////////////////////////////////////\n\nfilmsListRef.addEventListener('click', onFilmCardClick);\ncloseBtnRef.addEventListener('click', onCloseBtnClick);\n\nfunction onFilmCardClick(e) {\n  if (e.target.nodeName !== 'IMG') {\n    return;\n  }\n\n  backdrop.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden';\n  document.addEventListener('keydown', onEscBtnPress);\n  document.addEventListener('click', onBackdropClick);\n  /////////Проверка id фильма по которому кликнули\n  let idImage = e.target.dataset.id;\n  let idImageNumber = Number(idImage);\n\n  /////Данные с Локального хранилища\n  let dataLocalStorage = dataInLocalStorage();\n  let arrsFilm = dataLocalStorage.results; ////Обьект с 20 фильмами\n  let changeFilm = arrsFilm.find(film => film.id === idImageNumber);\n\n  ///////////////Переменные для отрисовки Модалки\n  let poster_path = changeFilm.poster_path;\n  let title = processingNameFilm(changeFilm.title, changeFilm.name);\n  let vote_average = changeFilm.vote_average;\n  let vote_count = changeFilm.vote_count;\n  let popularity = changeFilm.popularity;\n  let genre_ids = processingGenre(changeFilm.genre_ids);\n  let overview = changeFilm.overview;\n\n  modal.insertAdjacentHTML(\n    'afterbegin',\n    makeFilmModalMarkup(\n      poster_path,\n      title,\n      vote_average,\n      vote_count,\n      popularity,\n      genre_ids,\n      overview\n    )\n  );\n  const obj = {\n    poster_path,\n    title,\n    vote_average,\n    vote_count,\n    popularity,\n    genre_ids,\n    overview,\n  };\n  const btnWatch = document.querySelector('.btn__watch');\n  const btnQueue = document.querySelector('.btn__queue');\n  btnWatch.addEventListener('click', () => {\n    btnQueue.textContent = 'You add film to watched';\n    btnColor(btnWatch, btnQueue);\n    onWatchedBtnClick(obj);\n  });\n  btnQueue.addEventListener('click', () => {\n    btnWatch.textContent = 'You add film to queue ';\n    btnColor(btnQueue, btnWatch);\n    onQueueBtnClick(obj);\n  });\n}\n\nfunction makeFilmModalMarkup(\n  poster_path,\n  title,\n  vote_average,\n  vote_count,\n  popularity,\n  genre_ids,\n  overview\n) {\n  return `\n  <div class=\"film__image\">\n  <img class=\"image\" src=\"${BASE_URL_IMAGE}/${fileSize}/${poster_path}\" alt=${title}/>\n    </div>\n    <div class=\"film__information\">\n      <div>\n        <h2 class=\"film__title\">${title}</h2>\n        <ul>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Vote / Votes</p>\n            <p class=\"film__info--uper\">\n              <span class=\"film__rating--orange\">${vote_average}</span>\n              <span class=\"film__rating--divider\"> / </span>\n              <span class=\"vote-count\">${vote_count}</span>\n            </p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Popularity</p>\n            <p class=\"film__info--uper\">${popularity}</p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Original title</p>\n            <p>${title}</p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Genre</p>\n            ${\n              genre_ids.length !== 0\n                ? `<p class=\"film__info\">${genre_ids}</p>`\n                : `<p class=\"film__info\">No information</p>`\n            }\n          </li>\n        </ul>\n      </div>\n      <div>\n        <h3 class=\"film__about__title\">About</h3>\n        ${\n          overview\n            ? `<p class=\"film__about__text\">${overview}</p>`\n            : `<p class=\"film__about__text\">No information</p>`\n        }\n      </div>\n      <div class=\"film__button__wrapper\">\n        <button type=\"button\" class=\"film__button btn__watch\">Add to watched</button>\n        <button type=\"button\" class=\"film__button btn__queue\">Add to queue</button>\n      </div>\n      </div>`;\n}\n\n//Функція закриття по кнопці\nfunction onCloseBtnClick() {\n  const filmImg = document.querySelector('.film__image');\n  const filmInfo = document.querySelector('.film__information');\n  filmImg.remove();\n  filmInfo.remove();\n\n  backdrop.classList.add('is-hidden');\n  document.body.style.overflow = 'scroll';\n  document.removeEventListener('keydown', onEscBtnPress);\n  document.removeEventListener('click', onBackdropClick);\n}\n\n//Функція закриття по ESC\nfunction onEscBtnPress(e) {\n  if (e.code === 'Escape') {\n    onCloseBtnClick();\n  }\n}\n\n//Функція закриття модалки поза межами модалки\nfunction onBackdropClick(e) {\n  if (e.target === backdrop) {\n    onCloseBtnClick();\n  }\n}\n","import { localStorageUs } from './localStorage';\nconst WATCH_KEY = 'Watched';\nconst QUEUE_KEY = 'Queue';\nlet arrWatch = [];\nlet arrQueue = [];\n\n// export const btnWatch = document.querySelector('.btn__watch');\n// export const btnQueue = document.querySelector('.btn__queue');\n// btnWatch.addEventListener('click', onWatchedBtnClick);\n// btnQueue.addEventListener('click', onQueueBtnClick);\nfunction onWatchedBtnClick(obj) {\n  arrWatch.push(obj);\n  localStorageUs.save(WATCH_KEY, arrWatch);\n}\n\nfunction onQueueBtnClick(obj) {\n  arrQueue.push(obj);\n  localStorageUs.save(QUEUE_KEY, arrQueue);\n}\nexport function btnColor(add, btnNo) {\n  add.style.backgroundColor = '#ff6b08';\n  add.style.color = '#ffffff';\n  add.style.borderColor = '#ff6b01';\n  btnNo.style.backgroundColor = '#ffffff';\n  btnNo.style.color = 'black';\n  btnNo.style.borderColor = 'rgba(0, 0, 0, 0.56)';\n\n  add.textContent = 'Added ✅';\n  btnNo.setAttribute('disabled', 'true');\n  add.setAttribute('disabled', 'true');\n}\n\nexport { onWatchedBtnClick, onQueueBtnClick };\n"],"names":["parcelRequire","$31u3U","$0503619c9b370715$var$arrWatch","$0503619c9b370715$var$arrQueue","$0503619c9b370715$export$852eb21c65e590aa","obj","push","localStorageUs","save","$0503619c9b370715$export$47c64e1cb6fdbeb7","$0503619c9b370715$export$7781a7e4a9ea74f0","add","btnNo","style","backgroundColor","color","borderColor","textContent","setAttribute","$08d119c81b5e7d0e$var$backdrop","document","querySelector","$08d119c81b5e7d0e$var$filmsListRef","$08d119c81b5e7d0e$var$closeBtnRef","$08d119c81b5e7d0e$var$modal","$08d119c81b5e7d0e$var$onCloseBtnClick","filmImg","filmInfo","remove","classList","body","overflow","removeEventListener","$08d119c81b5e7d0e$var$onEscBtnPress","$08d119c81b5e7d0e$var$onBackdropClick","e","code","target","addEventListener","nodeName","idImage","dataset","id","idImageNumber","Number","changeFilm","dataInLocalStorage1","localStorage","getItem","JSON","parse","error","console","warn","$08d119c81b5e7d0e$var$dataInLocalStorage","results","find","film","poster_path","title","$1JKsw","processingNameFilm","name","vote_average","vote_count","popularity","genre_ids","processingGenre","overview","insertAdjacentHTML","length","$08d119c81b5e7d0e$var$makeFilmModalMarkup","btnWatch","btnQueue"],"version":3,"file":"library.1ce9fb3a.js.map"}