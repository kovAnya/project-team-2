{"mappings":"gfAAAA,EAAA,S,WCAA,IAAAC,EAAAD,EAAA,SAGIE,EAAW,GACXC,EAAW,GAMf,SAASC,EAAkBC,GACzBH,EAASI,KAAKD,GACdJ,EAAAM,eAAeC,KAXC,UAWeN,E,CAGjC,SAASO,EAAgBJ,GACvBF,EAASG,KAAKD,GACdJ,EAAAM,eAAeC,KAfC,QAeeL,E,CAE1B,SAASO,EAASC,EAAKC,GAC5BD,EAAIE,MAAMC,gBAAkB,UAC5BH,EAAIE,MAAME,MAAQ,UAClBJ,EAAIE,MAAMG,YAAc,UACxBJ,EAAMC,MAAMC,gBAAkB,UAC9BF,EAAMC,MAAME,MAAQ,QACpBH,EAAMC,MAAMG,YAAc,sBAE1BL,EAAIM,YAAc,UAClBL,EAAMM,aAAa,WAAY,QAC/BP,EAAIO,aAAa,WAAY,O,kBDjBzBC,EAAWC,SAASC,cAAc,oBAClCC,EAAeF,SAASC,cAAc,WACtCE,EAAcH,SAASC,cAAc,eACrCG,EAAQJ,SAASC,cAAc,qBAEjCI,EAAiB,6BACjBC,EAAW,OA6IQ,SAAdC,IACP,IAAMC,EAAUR,SAASC,cAAc,gBACjCQ,EAAWT,SAASC,cAAc,sBACxCO,EAAQE,SACRD,EAASC,SAETX,EAASY,UAAUpB,IAAI,aACvBS,SAASY,KAAKnB,MAAMoB,SAAW,SAC/Bb,SAASc,oBAAoB,UAAWC,GACxCf,SAASc,oBAAoB,QAASE,E,CAIvB,SAARD,EAAcE,GACN,WAAXA,EAAEC,MACJX,G,CAKJ,SAASS,EAAgBC,GACnBA,EAAEE,SAAWpB,GACfQ,G,CAlJJL,EAAakB,iBAAiB,SAG9B,SAAyBH,GACvB,GAA0B,QAAtBA,EAAEE,OAAOE,SACX,OAGFtB,EAASY,UAAUD,OAAO,aAC1BV,SAASY,KAAKnB,MAAMoB,SAAW,SAC/Bb,SAASoB,iBAAiB,UAAWL,GACrCf,SAASoB,iBAAiB,QAASJ,GAEH,IAA5BM,EAAUL,EAAEE,OAAOI,QAAQC,GAC3BC,EAAgBC,OAAOJ,GAKvBK,EA/B4B,WAChC,IAAIC,EAAqBC,aAAaC,QAAQ,aAG9C,IACE,OAAmCC,KAAKC,MAAMJ,E,CAC9C,MAAOK,GACPC,QAAQC,KAAK,sD,EAsBQC,GACSC,QACNC,MAAK,SAAAC,G,OAAQA,EAAKf,KAAOC,C,IAG/Ce,GAAc,EAAAC,EAAAC,kBAAiBf,EAAWa,aAC1CG,GAAQ,EAAAF,EAAAG,oBAAmBjB,EAAWgB,MAAOhB,EAAWkB,MACxDC,EAAenB,EAAWmB,aAC1BC,EAAapB,EAAWoB,WACxBC,EAAarB,EAAWqB,WACxBC,GAAY,EAAAR,EAAAS,iBAAgBvB,EAAWsB,WACvCE,EAAWxB,EAAWwB,SAE1B/C,EAAMgD,mBACJ,aAkCJ,SACEZ,EACAG,EACAG,EACAC,EACAC,EACAC,EACAE,GAEA,MAAO,oCAMyBE,OAJd,OAAhBb,EAAuB,2BAA6Ca,OAAlBhD,EAAe,KAAegD,OAAZ/C,EAAS,KAAuB+C,OAApBb,EAAY,UAAca,OAANV,EAAM,MAAM,GAAG,oGASpEU,OALjBV,EAAM,8MAOCU,OAFUP,EAAa,kHAOtBO,OALDN,EAAW,gLASnCM,OAJyBL,EAAW,sIASvCK,OALGV,EAAM,0HAebU,OAVyB,IAArBJ,EAAUK,OACN,yBAAmCD,OAAVJ,EAAU,QAClC,2CACN,4HAUJI,OAHCF,EACI,gCAAyCE,OAATF,EAAS,QACxC,kDACN,oQ,CAlFLI,CACEf,EACAG,EACAG,EACAC,EACAC,EACAC,EACAE,IAGJ,IAAMlE,EAAM,CACVuD,cACAG,QACAG,eACAC,aACAC,aACAC,YACAE,YAEIK,EAAWxD,SAASC,cAAc,eAClCwD,EAAWzD,SAASC,cAAc,eACxCuD,EAASpC,iBAAiB,SAAS,WACjCqC,EAAS5D,YAAc,0BACvBP,EAASkE,EAAUC,GACnBzE,EAAkBC,E,IAEpBwE,EAASrC,iBAAiB,SAAS,WACjCoC,EAAS3D,YAAc,yBACvBP,EAASmE,EAAUD,GACnBnE,EAAgBJ,E,OA5DpBkB,EAAYiB,iBAAiB,QAASb,E","sources":["src/js/modal_film.js","src/js/add_local_storage.js"],"sourcesContent":["import { fetchMoviesTrending } from './fetchMoviesTrending';\nimport { getMovieGenres } from './genres';\nimport { btnColor } from './add_local_storage';\nimport {\n  renderMoviesTrending,\n  processingReleasedYear,\n  processingGenre,\n  processingNameFilm,\n  processingPoster,\n} from './renderMoviesTrending';\nimport { onWatchedBtnClick, onQueueBtnClick } from './add_local_storage';\n\nconst backdrop = document.querySelector('.modal__backdrop');\nconst filmsListRef = document.querySelector('.movies');\nconst closeBtnRef = document.querySelector('.closeModal');\nconst modal = document.querySelector('.modal__container');\n\nlet BASE_URL_IMAGE = 'https://image.tmdb.org/t/p';\nlet fileSize = 'w400';\nlet stubPicture = 'https://raw.githubusercontent.com/kovAnya/project-team-2/main/src/images/placeholder/no-image_desktop.webp'\n\n////////////////////////////////Получаем данные с Локального Хранилища\n\nfunction dataInLocalStorage() {\n  let dataInLocalStorage = localStorage.getItem('dataInApi');\n  let parsedDataInLocalStorage = '';\n\n  try {\n    return (parsedDataInLocalStorage = JSON.parse(dataInLocalStorage));\n  } catch (error) {\n    console.warn('Ошибка во время парса данных с локального хранилища');\n  }\n}\n//////////////////////////////////////////////////////////\n\nfilmsListRef.addEventListener('click', onFilmCardClick);\ncloseBtnRef.addEventListener('click', onCloseBtnClick);\n\nfunction onFilmCardClick(e) {\n  if (e.target.nodeName !== 'IMG') {\n    return;\n  }\n\n  backdrop.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden';\n  document.addEventListener('keydown', onEscBtnPress);\n  document.addEventListener('click', onBackdropClick);\n  /////////Проверка id фильма по которому кликнули\n  let idImage = e.target.dataset.id;\n  let idImageNumber = Number(idImage);\n\n  /////Данные с Локального хранилища\n  let dataLocalStorage = dataInLocalStorage();\n  let arrsFilm = dataLocalStorage.results; ////Обьект с 20 фильмами\n  let changeFilm = arrsFilm.find(film => film.id === idImageNumber);\n\n  ///////////////Переменные для отрисовки Модалки\n  let poster_path = processingPoster(changeFilm.poster_path);\n  let title = processingNameFilm(changeFilm.title, changeFilm.name);\n  let vote_average = changeFilm.vote_average;\n  let vote_count = changeFilm.vote_count;\n  let popularity = changeFilm.popularity;\n  let genre_ids = processingGenre(changeFilm.genre_ids);\n  let overview = changeFilm.overview;\n\n  modal.insertAdjacentHTML(\n    'afterbegin',\n    makeFilmModalMarkup(\n      poster_path,\n      title,\n      vote_average,\n      vote_count,\n      popularity,\n      genre_ids,\n      overview\n    )\n  );\n  const obj = {\n    poster_path,\n    title,\n    vote_average,\n    vote_count,\n    popularity,\n    genre_ids,\n    overview,\n  };\n  const btnWatch = document.querySelector('.btn__watch');\n  const btnQueue = document.querySelector('.btn__queue');\n  btnWatch.addEventListener('click', () => {\n    btnQueue.textContent = 'You add film to watched';\n    btnColor(btnWatch, btnQueue);\n    onWatchedBtnClick(obj);\n  });\n  btnQueue.addEventListener('click', () => {\n    btnWatch.textContent = 'You add film to queue ';\n    btnColor(btnQueue, btnWatch);\n    onQueueBtnClick(obj);\n  });\n}\n\nfunction makeFilmModalMarkup(\n  poster_path,\n  title,\n  vote_average,\n  vote_count,\n  popularity,\n  genre_ids,\n  overview\n) {\n  return `\n  <div class=\"film__image\">\n  ${poster_path !== null ? `<img class=\"image\" src=\"${BASE_URL_IMAGE}/${fileSize}/${poster_path}\" alt=${title}/>` : ''}\n    </div>\n    <div class=\"film__information\">\n      <div>\n        <h2 class=\"film__title\">${title}</h2>\n        <ul>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Vote / Votes</p>\n            <p class=\"film__info--uper\">\n              <span class=\"film__rating--orange\">${vote_average}</span>\n              <span class=\"film__rating--divider\"> / </span>\n              <span class=\"vote-count\">${vote_count}</span>\n            </p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Popularity</p>\n            <p class=\"film__info--uper\">${popularity}</p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Original title</p>\n            <p>${title}</p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Genre</p>\n            ${\n              genre_ids.length !== 0\n                ? `<p class=\"film__info\">${genre_ids}</p>`\n                : `<p class=\"film__info\">No information</p>`\n            }\n          </li>\n        </ul>\n      </div>\n      <div>\n        <h3 class=\"film__about__title\">About</h3>\n        ${\n          overview\n            ? `<p class=\"film__about__text\">${overview}</p>`\n            : `<p class=\"film__about__text\">No information</p>`\n        }\n      </div>\n      <div class=\"film__button__wrapper\">\n        <button type=\"button\" class=\"film__button btn__watch\">Add to watched</button>\n        <button type=\"button\" class=\"film__button btn__queue\">Add to queue</button>\n      </div>\n      </div>`;\n}\n\n//Функція закриття по кнопці\nfunction onCloseBtnClick() {\n  const filmImg = document.querySelector('.film__image');\n  const filmInfo = document.querySelector('.film__information');\n  filmImg.remove();\n  filmInfo.remove();\n\n  backdrop.classList.add('is-hidden');\n  document.body.style.overflow = 'scroll';\n  document.removeEventListener('keydown', onEscBtnPress);\n  document.removeEventListener('click', onBackdropClick);\n}\n\n//Функція закриття по ESC\nfunction onEscBtnPress(e) {\n  if (e.code === 'Escape') {\n    onCloseBtnClick();\n  }\n}\n\n//Функція закриття модалки поза межами модалки\nfunction onBackdropClick(e) {\n  if (e.target === backdrop) {\n    onCloseBtnClick();\n  }\n}\n","import { localStorageUs } from './localStorage';\nconst WATCH_KEY = 'Watched';\nconst QUEUE_KEY = 'Queue';\nlet arrWatch = [];\nlet arrQueue = [];\n\n// export const btnWatch = document.querySelector('.btn__watch');\n// export const btnQueue = document.querySelector('.btn__queue');\n// btnWatch.addEventListener('click', onWatchedBtnClick);\n// btnQueue.addEventListener('click', onQueueBtnClick);\nfunction onWatchedBtnClick(obj) {\n  arrWatch.push(obj);\n  localStorageUs.save(WATCH_KEY, arrWatch);\n}\n\nfunction onQueueBtnClick(obj) {\n  arrQueue.push(obj);\n  localStorageUs.save(QUEUE_KEY, arrQueue);\n}\nexport function btnColor(add, btnNo) {\n  add.style.backgroundColor = '#ff6b08';\n  add.style.color = '#ffffff';\n  add.style.borderColor = '#ff6b01';\n  btnNo.style.backgroundColor = '#ffffff';\n  btnNo.style.color = 'black';\n  btnNo.style.borderColor = 'rgba(0, 0, 0, 0.56)';\n\n  add.textContent = 'Added ✅';\n  btnNo.setAttribute('disabled', 'true');\n  add.setAttribute('disabled', 'true');\n}\n\nexport { onWatchedBtnClick, onQueueBtnClick };\n"],"names":["parcelRequire","$UL92Z","$58e9e489aafad66c$var$arrWatch","$58e9e489aafad66c$var$arrQueue","$58e9e489aafad66c$export$852eb21c65e590aa","obj","push","localStorageUs","save","$58e9e489aafad66c$export$47c64e1cb6fdbeb7","$58e9e489aafad66c$export$7781a7e4a9ea74f0","add","btnNo","style","backgroundColor","color","borderColor","textContent","setAttribute","$8eef5e65369a408e$var$backdrop","document","querySelector","$8eef5e65369a408e$var$filmsListRef","$8eef5e65369a408e$var$closeBtnRef","$8eef5e65369a408e$var$modal","$8eef5e65369a408e$var$BASE_URL_IMAGE","$8eef5e65369a408e$var$fileSize","$8eef5e65369a408e$var$onCloseBtnClick","filmImg","filmInfo","remove","classList","body","overflow","removeEventListener","$8eef5e65369a408e$var$onEscBtnPress","$8eef5e65369a408e$var$onBackdropClick","e","code","target","addEventListener","nodeName","idImage","dataset","id","idImageNumber","Number","changeFilm","dataInLocalStorage1","localStorage","getItem","JSON","parse","error","console","warn","$8eef5e65369a408e$var$dataInLocalStorage","results","find","film","poster_path","$lnzPg","processingPoster","title","processingNameFilm","name","vote_average","vote_count","popularity","genre_ids","processingGenre","overview","insertAdjacentHTML","concat","length","$8eef5e65369a408e$var$makeFilmModalMarkup","btnWatch","btnQueue"],"version":3,"file":"index.7260a51e.js.map"}