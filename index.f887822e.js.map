{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,yGAOMC,SAON,MAAMC,EAAiBC,SAASC,cAAc,iBACxCC,EAAkBF,SAASC,cAAc,uBACzCE,EAAgBH,SAASC,cAAc,WAG7C,IAAIG,EAAa,GACbC,GAAc,EACdC,EAAS,KAENC,eAAeC,EAAWC,GAC/B,IACE,MAAMC,QAAoBC,EAAMC,IAC9B,qDAAqDhB,EAAAiB,+BAA+BT,UAAmBK,yBAOzG,OALAJ,GAAc,EACD,IAATI,GACFK,EAAAC,WAAWC,MAAMN,EAAYO,KAAKC,eAG7BR,EAAYO,KAAKE,O,CACxB,MAAOC,GACPC,QAAQD,MAAMA,E,EAmClBN,EAAAC,WAAWO,GAAG,aAAaC,IACzB,MAAMC,EAAcD,EAAME,KAC1BtB,EAAcuB,UAAY,GACtBrB,GACF,EAAAsB,EAAAC,uBAAqB,EAAAC,EAAAC,qBAAoBN,KAEzC,EAAAG,EAAAC,sBAAqBpB,EAAWgB,KAElC,EAAAO,EAAAC,aACA,EAAAD,EAAAE,aAAY,IAGdlC,EAAemC,iBAAiB,UA3ChC3B,eAA0B4B,GAIxB,GAHAA,EAAEC,iBAEFhC,EAAaF,EAAgBmC,MACV,KAAfjC,EAAJ,CAOAL,EAAeiB,QACfb,EAAcuB,UAAY,GAC1B,IAGE,GAFCpB,QAAgBE,EAAWZ,EAAA6B,MAEN,IAAlBnB,EAAOgC,OAMT,OALAC,EAAAC,QAAQC,cACNC,EAAAC,GAASC,OAAOC,QACd,mFAKA,EAAAlB,EAAAC,sBAAqBtB,EACb,CAAd,MAAOc,GAAO,C,MApBZsB,EAAAC,GAASC,OAAOC,QACN,8C","sources":["src/js/search_movie.js"],"sourcesContent":["import { ApiKey, page } from './refs';\nimport { pagination } from './pagination';\nimport { fetchMoviesTrending } from './fetchMoviesTrending';\nimport { onScroll, onToTopBtn } from './scroll';\nimport { renderMoviesTrending } from './renderMoviesTrending';\nimport Notiflix from 'notiflix';\nimport { Loading } from 'notiflix/build/notiflix-loading-aio';\nconst axios = require('axios').default;\n\n\n\n\nimport { renderMoviesTrending } from './renderMoviesTrending';\n\nconst searchFilmForm = document.querySelector('.header__form');\nconst searchFilmInput = document.querySelector('.header__form-input');\nconst moviesElement = document.querySelector('.movies');\n\n\nlet inputValue = '';\nlet searchFilms = true;\nlet answer = null;\n\nexport async function fetchFilms(page) {\n  try {\n    const fetchResult = await axios.get(\n      `https://api.themoviedb.org/3/search/movie?api_key=${ApiKey}&language=en-US&query=${inputValue}&page=${page}&include_adult=false`\n    );\n    searchFilms = false;\n    if (page === 1) {\n      pagination.reset(fetchResult.data.total_results);\n    }\n    \n    return fetchResult.data.results;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nasync function searchFilm(e) {\n  e.preventDefault();\n\n  inputValue = searchFilmInput.value;\n  if (inputValue === '') {\n      Notiflix.Notify.failure(\n                'Enter the correct movie name and try again.'\n      );\n    return;\n  }\n \n  searchFilmForm.reset();\n  moviesElement.innerHTML = '';\n  try {\n     answer = await (fetchFilms(page));\n   \n    if (answer.length === 0) {\n      Loading.remove();\n        Notiflix.Notify.failure(\n          'Search result not successful. Enter the correct movie name and try again.'\n          \n      );\n      return;\n          }\n    await renderMoviesTrending(answer);\n  } catch (error) {\n   \n  }\n}\n\n\npagination.on('afterMove', event => {\n  const currentPage = event.page;\n  moviesElement.innerHTML = '';\n  if (searchFilms) {\n    renderMoviesTrending(fetchMoviesTrending(currentPage));\n  } else {\n    renderMoviesTrending(fetchFilms(currentPage));\n  }\n  onScroll();\n  onToTopBtn();\n});\n\nsearchFilmForm.addEventListener('submit', searchFilm);\n\n\n"],"names":["$krGWQ","parcelRequire","default","$820a678d1478b261$var$searchFilmForm","document","querySelector","$820a678d1478b261$var$searchFilmInput","$820a678d1478b261$var$moviesElement","$820a678d1478b261$var$inputValue","$820a678d1478b261$var$searchFilms","$820a678d1478b261$var$answer","async","$820a678d1478b261$export$651946d2de0aa03","page1","fetchResult","$820a678d1478b261$require$axios","get","ApiKey","$2nhTy","pagination","reset","data","total_results","results","error","console","on","event","currentPage","page","innerHTML","$1JKsw","renderMoviesTrending","$225bx","fetchMoviesTrending","$2YGUk","onScroll","onToTopBtn","addEventListener","e","preventDefault","value","length","$dSs1Y","Loading","remove","$parcel$interopDefault","$eWCmQ","Notify","failure"],"version":3,"file":"index.f887822e.js.map"}