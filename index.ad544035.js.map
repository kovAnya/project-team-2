{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,6BCAAD,EAAAC,EAAA,S,wBAEMC,SAECC,eAAeC,EAAWC,EAAYC,GAC3C,IACE,MAAMC,QAAoBC,EAAMC,IAC9B,qDAAqDT,EAAAU,+BAA+BL,UAAmBC,yBAOzG,OAJa,IAATA,GACFK,EAAAC,WAAWC,MAAMN,EAAYO,KAAKC,eAG7BR,EAAYO,KAAKE,O,CACxB,MAAOC,GACPC,QAAQD,MAAMA,E,uEDLlB,MAAME,EAAiBC,SAASC,cAAc,iBACxCC,EAAkBF,SAASC,cAAc,uBACzCE,EAAgBH,SAASC,cAAc,WAE7C,IAAIG,EAAa,GACbC,GAAc,EACdC,EAAS,KA2Bbf,EAAAC,WAAWe,GAAG,aAAaC,IACzB,MAAMC,EAAcD,EAAMtB,KAC1BiB,EAAcO,UAAY,GACtBL,GACF,EAAAM,EAAAC,uBAAqB,EAAAC,EAAAC,qBAAoBL,KAEzC,EAAAE,EAAAC,sBAAqB5B,EAAWoB,EAAYK,KAE9C,EAAAM,EAAAC,aACA,EAAAD,EAAAE,aAAY,IAGdlB,EAAemB,iBAAiB,UArChCnC,eAA0BoC,GAIxB,GAHAA,EAAEC,iBAEFhB,EAAaF,EAAgBmB,MACV,KAAfjB,EAAJ,CAKAL,EAAeN,QACf,IAEE,GADAa,QAAetB,EAAWoB,EAAYxB,EAAAM,MAChB,IAAlBoB,EAAOgB,OAKT,OAJAC,EAAAC,QAAQC,cACRC,EAAAC,GAASC,OAAOC,QACd,6EAIJxB,GAAc,EACdF,EAAcO,UAAY,SACpB,EAAAC,EAAAC,sBAAqBN,EACb,CAAd,MAAOT,GAAO,C,MAjBd6B,EAAAC,GAASC,OAAOC,QAAQ,8C","sources":["src/js/search_movie.js","src/js/API/fetchSearchMovie.js"],"sourcesContent":["import { page } from './refs';\nimport { pagination } from './pagination';\nimport { fetchMoviesTrending } from './API/fetchMoviesTrending';\nimport { fetchFilms } from './API/fetchSearchMovie';\nimport { onScroll, onToTopBtn } from './scroll';\nimport { renderMoviesTrending } from './renderMoviesTrending';\nimport Notiflix from 'notiflix';\nimport { Loading } from 'notiflix/build/notiflix-loading-aio';\n\nimport { renderMoviesTrending } from './renderMoviesTrending';\n\nconst searchFilmForm = document.querySelector('.header__form');\nconst searchFilmInput = document.querySelector('.header__form-input');\nconst moviesElement = document.querySelector('.movies');\n\nlet inputValue = '';\nlet searchFilms = true;\nlet answer = null;\n\nasync function searchFilm(e) {\n  e.preventDefault();\n\n  inputValue = searchFilmInput.value;\n  if (inputValue === '') {\n    Notiflix.Notify.failure('Enter the correct movie name and try again.');\n    return;\n  }\n\n  searchFilmForm.reset();\n  try {\n    answer = await fetchFilms(inputValue, page);\n    if (answer.length === 0) {\n      Loading.remove();\n      Notiflix.Notify.failure(\n        'Search result not successful. Enter the correct movie name and try again.'\n      );\n      return;\n    }\n    searchFilms = false;\n    moviesElement.innerHTML = '';\n    await renderMoviesTrending(answer);\n  } catch (error) {}\n}\n\npagination.on('afterMove', event => {\n  const currentPage = event.page;\n  moviesElement.innerHTML = '';\n  if (searchFilms) {\n    renderMoviesTrending(fetchMoviesTrending(currentPage));\n  } else {\n    renderMoviesTrending(fetchFilms(inputValue, currentPage));\n  }\n  onScroll();\n  onToTopBtn();\n});\n\nsearchFilmForm.addEventListener('submit', searchFilm);\n","import { ApiKey } from '../refs';\nimport { pagination } from '../pagination';\nconst axios = require('axios').default;\n\nexport async function fetchFilms(inputValue, page) {\n  try {\n    const fetchResult = await axios.get(\n      `https://api.themoviedb.org/3/search/movie?api_key=${ApiKey}&language=en-US&query=${inputValue}&page=${page}&include_adult=false`\n    );\n    // searchFilms = false;\n    if (page === 1) {\n      pagination.reset(fetchResult.data.total_results);\n    }\n\n    return fetchResult.data.results;\n  } catch (error) {\n    console.error(error);\n  }\n}\n"],"names":["$krGWQ","parcelRequire","default","async","$f0dc6a8c571a1961$export$651946d2de0aa03","inputValue","page","fetchResult","$f0dc6a8c571a1961$require$axios","get","ApiKey","$2nhTy","pagination","reset","data","total_results","results","error","console","$820a678d1478b261$var$searchFilmForm","document","querySelector","$820a678d1478b261$var$searchFilmInput","$820a678d1478b261$var$moviesElement","$820a678d1478b261$var$inputValue","$820a678d1478b261$var$searchFilms","$820a678d1478b261$var$answer","on","event","currentPage","innerHTML","$1JKsw","renderMoviesTrending","$7PTCF","fetchMoviesTrending","$2YGUk","onScroll","onToTopBtn","addEventListener","e","preventDefault","value","length","$dSs1Y","Loading","remove","$parcel$interopDefault","$eWCmQ","Notify","failure"],"version":3,"file":"index.ad544035.js.map"}