{"mappings":"gfACAA,EAAA,S,4BAIMC,EAAWC,SAASC,cAAc,oBAClCC,EAAeF,SAASC,cAAc,WACtCE,EAAcH,SAASC,cAAc,eACrCG,EAAQJ,SAASC,cAAc,qBAEjCI,EAAiB,6BACjBC,EAAW,OAwGQ,SAAdC,IACP,IAAMC,EAAUR,SAASC,cAAc,gBACjCQ,EAAWT,SAASC,cAAc,sBACxCO,EAAQE,SACRD,EAASC,SAETX,EAASY,UAAUC,IAAI,aACvBZ,SAASa,KAAKC,MAAMC,SAAW,SAC/Bf,SAASgB,oBAAoB,UAAWC,GACxCjB,SAASgB,oBAAoB,QAASE,E,CAIvB,SAARD,EAAcE,GACN,WAAXA,EAAEC,MACJb,G,CAKJ,SAASW,EAAgBC,GACnBA,EAAEE,SAAWtB,GACfQ,G,CA5GJL,EAAaoB,iBAAiB,SAG9B,SAAyBH,GACvB,GAA0B,QAAtBA,EAAEE,OAAOE,SACX,OAIFxB,EAASY,UAAUD,OAAO,aAC1BV,SAASa,KAAKC,MAAMC,SAAW,SAC/Bf,SAASsB,iBAAiB,UAAWL,GACrCjB,SAASsB,iBAAiB,QAASJ,GAEH,IAA5BM,EAAUL,EAAEE,OAAOI,QAAQC,GAC3BC,EAAgBC,OAAOJ,GAKvBK,EAjC4B,WAChC,IAAIC,EAAqBC,aAAaC,QAAQ,aAG9C,IACA,OAAkCC,KAAKC,MAAMJ,E,CAE3C,MAAMK,GACNC,QAAQC,KAAK,sD,EAuBQC,GACSC,QACNC,MAAM,SAAAC,G,OAAQA,EAAKf,KAAOC,C,IAGhDe,EAAcb,EAAWa,YACzBC,GAAQ,EAAAC,EAAAC,oBAAmBhB,EAAWc,MAAOd,EAAWiB,MACxDC,EAAelB,EAAWkB,aAC1BC,EAAanB,EAAWmB,WACxBC,EAAapB,EAAWoB,WACxBC,GAAY,EAAAN,EAAAO,iBAAgBtB,EAAWqB,WACvCE,EAAWvB,EAAWuB,SAE1BhD,EAAMiD,mBAAmB,aAI3B,SACEX,EACAC,EACAI,EACAC,EACAC,EACAC,EACAE,GAEA,MAAO,4DAEqCE,OAAlBjD,EAAe,KAAeiD,OAAZhD,EAAS,KAAuBgD,OAApBZ,EAAY,UAIpCY,OAJ4CX,EAAM,sGASjCW,OALjBX,EAAM,8MAOCW,OAFUP,EAAa,kHAOtBO,OALDN,EAAW,gLASnCM,OAJyBL,EAAW,sIAQjBK,OAJnBX,EAAM,gJAUgBW,OANHJ,EAAU,6JAMEI,OAATF,EAAS,wQ,CA7CPG,CAAoBb,EAAaC,EAAOI,EAAcC,EAAYC,EAAYC,EAAWE,G,IA9BlIjD,EAAYmB,iBAAiB,QAASf,E","sources":["src/js/modal_film.js"],"sourcesContent":["\nimport { fetchMoviesTrending } from \"./fetchMoviesTrending\";\nimport {getMovieGenres} from './genres';\nimport {renderMoviesTrending, processingReleasedYear, processingGenre, processingNameFilm} from './renderMoviesTrending';\n\nconst backdrop = document.querySelector('.modal__backdrop');\nconst filmsListRef = document.querySelector('.movies'); \nconst closeBtnRef = document.querySelector('.closeModal');\nconst modal = document.querySelector('.modal__container');\n\nlet BASE_URL_IMAGE = 'https://image.tmdb.org/t/p';\nlet fileSize = 'w400';\n\n\n  ////////////////////////////////Получаем данные с Локального Хранилища\n\nfunction dataInLocalStorage() {\n  let dataInLocalStorage = localStorage.getItem(\"dataInApi\");\n  let parsedDataInLocalStorage = '';\n\n  try{\n  return parsedDataInLocalStorage = JSON.parse(dataInLocalStorage)\n  \n  } catch(error) {\n    console.warn(\"Ошибка во время парса данных с локального хранилища\")\n  }\n}\n//////////////////////////////////////////////////////////\n\nfilmsListRef.addEventListener('click', onFilmCardClick);\ncloseBtnRef.addEventListener('click', onCloseBtnClick);\n\nfunction onFilmCardClick(e) {\n  if (e.target.nodeName !== \"IMG\") {\n    return;\n  }\n\n\n  backdrop.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden';\n  document.addEventListener('keydown', onEscBtnPress);\n  document.addEventListener('click', onBackdropClick);\n  /////////Проверка id фильма по которому кликнули\n  let idImage = e.target.dataset.id;\n  let idImageNumber = Number(idImage);\n \n  /////Данные с Локального хранилища\n  let dataLocalStorage = dataInLocalStorage()\n  let arrsFilm = dataLocalStorage.results ////Обьект с 20 фильмами\n  let changeFilm = arrsFilm.find (film => film.id === idImageNumber)\n  \n  ///////////////Переменные для отрисовки Модалки\n  let poster_path = changeFilm.poster_path;\n  let title = processingNameFilm(changeFilm.title, changeFilm.name);\n  let vote_average = changeFilm.vote_average\n  let vote_count = changeFilm.vote_count\n  let popularity = changeFilm.popularity\n  let genre_ids = processingGenre(changeFilm.genre_ids)\n  let overview = changeFilm.overview\n\n  modal.insertAdjacentHTML('afterbegin', makeFilmModalMarkup(poster_path, title, vote_average, vote_count, popularity, genre_ids, overview));\n  \n}\n\nfunction makeFilmModalMarkup(\n  poster_path,\n  title,\n  vote_average,\n  vote_count,\n  popularity,\n  genre_ids,\n  overview,\n  ) {\n  return `\n  <div class=\"film__image\">\n  <img class=\"image\" src=\"${BASE_URL_IMAGE}/${fileSize}/${poster_path}\" alt=${title}/>\n    </div>\n    <div class=\"film__information\">\n      <div>\n        <h2 class=\"film__title\">${title}</h2>\n        <ul>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Vote / Votes</p>\n            <p class=\"film__info--uper\">\n              <span class=\"film__rating--orange\">${vote_average}</span>\n              <span class=\"film__rating--divider\"> / </span>\n              <span class=\"vote-count\">${vote_count}</span>\n            </p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Popularity</p>\n            <p class=\"film__info--uper\">${popularity}</p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Original title</p>\n            <p>${title}</p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Genre</p>\n            <p class=\"film__info\">${genre_ids}</p>\n          </li>\n        </ul>\n      </div>\n      <div>\n        <h3 class=\"film__about__title\">About</h3>\n        <p class=\"film__about__text\">${overview}</p>\n      </div>\n      <div class=\"film__button__wrapper\">\n        <button type=\"button\" class=\"film__button btn__watch\">Add to watched</button>\n        <button type=\"button\" class=\"film__button btn__queue\">Add to queue</button>\n      </div>\n      </div>`;\n}\n\n//Функція закриття по кнопці\nfunction onCloseBtnClick() {\n  const filmImg = document.querySelector('.film__image');\n  const filmInfo = document.querySelector('.film__information');\n  filmImg.remove();\n  filmInfo.remove();\n\n  backdrop.classList.add('is-hidden');\n  document.body.style.overflow = 'scroll';\n  document.removeEventListener('keydown', onEscBtnPress);\n  document.removeEventListener('click', onBackdropClick);\n}\n\n//Функція закриття по ESC\nfunction onEscBtnPress(e) {\n  if (e.code === 'Escape') {\n    onCloseBtnClick();\n  }\n}\n\n//Функція закриття модалки поза межами модалки\nfunction onBackdropClick(e) {\n  if (e.target === backdrop) {\n    onCloseBtnClick();\n  }\n}\n\n\n"],"names":["parcelRequire","$8eef5e65369a408e$var$backdrop","document","querySelector","$8eef5e65369a408e$var$filmsListRef","$8eef5e65369a408e$var$closeBtnRef","$8eef5e65369a408e$var$modal","$8eef5e65369a408e$var$BASE_URL_IMAGE","$8eef5e65369a408e$var$fileSize","$8eef5e65369a408e$var$onCloseBtnClick","filmImg","filmInfo","remove","classList","add","body","style","overflow","removeEventListener","$8eef5e65369a408e$var$onEscBtnPress","$8eef5e65369a408e$var$onBackdropClick","e","code","target","addEventListener","nodeName","idImage","dataset","id","idImageNumber","Number","changeFilm","dataInLocalStorage1","localStorage","getItem","JSON","parse","error","console","warn","$8eef5e65369a408e$var$dataInLocalStorage","results","find","film","poster_path","title","$lnzPg","processingNameFilm","name","vote_average","vote_count","popularity","genre_ids","processingGenre","overview","insertAdjacentHTML","concat","$8eef5e65369a408e$var$makeFilmModalMarkup"],"version":3,"file":"library.40217787.js.map"}